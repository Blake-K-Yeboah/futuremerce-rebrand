---
import { Image } from "astro:assets";
import type { TextImageGroupProps } from "../../types";

const { title, text, image, list } = Astro.props as TextImageGroupProps;
---

<section class="text-image-group">
    <div>
        <h3 class="text-image-group_title">{title}</h3>
        {text ? <p class="text-image-group_text">{text}</p> : ""}
        {
            list ? (
                <ul class="text-image-group_list">
                    {list.map((listItem) => (
                        <li class="text-image-group_list-item">{listItem}</li>
                    ))}
                </ul>
            ) : (
                ""
            )
        }
    </div>
    <Image src={image} alt="" loading="lazy" class="text-image-group_image" />
</section>

<script>
    document.querySelectorAll(".text-image-group_text").forEach((textEl) => {
        if (textEl.textContent?.includes("Contact us")) {
            textEl.innerHTML = textEl.innerHTML.replace(
                "Contact us",
                '<a href="/contact">Contact us</a>',
            );
        }
    });
</script>
